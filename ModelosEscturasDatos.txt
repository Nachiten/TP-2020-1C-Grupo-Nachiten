Broker

6 colas (APPEARED,NEW,CATCH,CAUGHT,GET,LOCALIZED)

	appeared-----new
	catch--------caught
	get----------localized

Para representar las colas, a priori podr√≠amos usar una lista de 6 colas o un vector[6] de tipo cola.

typedef enum{
APPEARED_POKEMON,
	NEW_POKEMON,
	CATCH_POKEMON,
	CAUGHT_POKEMON,
	GET_POKEMON,
	LOCALIZED_POKEMON
}tipo_cola; // esto es para el caso que se use un vector[6] de colas, en vez de
//identificarlas por numero, que sea por su nombre real.

typedef struct {
	//nodo_msg* colaMensajes;
	nodo_msg colaMensajes[];
nodo_registro* registro_suscriptores; 
d_cola* next; 
}d_cola; 

typedef struct{
	d_cliente suscriptor;
	nodo_registro* next;
}nodo_registro;

typedef struct{
	tipo_cola cola;
	int size_mensaje;
	d_contenido* contenido;
}d_mensaje recibido;

typedef struct{
	int id;
	d_mensaje_recibido mensaje;
	d_suscriptor* suscriptores_a_los_que_se_envio; // Inicializado en NULL
	nodo_msg* next;
}nodo_msg;

typedef cuarto struct{
	d_cliente cliente;// algun dato que lo identifique
	bool ack;
} d_suscriptor

Funciones del broker

void main(){

recibir_pedido_suscripcion(int cliente, cola){		}

recibir_mensaje_cliente(mensaje, cliente){	}

devolver_Id(cliente, ids){	}

enviar_mensaje_a_suscriptores(){	}
//cada mensaje debe saber cuales son sus suscriptores??
					//podria devolver 0 si faltan suscriptores y 1 si se envio
//a todos, en cuyo caso deberia eliminarse de la cola
					//eliminar si 1

agregar_a_registro_cola(cola, cliente){	}
// los clientes saben cuando retirarse de la
cola?
// o el broker sabe cuando deben retirarse? o      //nunca se retiran de las colas a las que se
//suscriben?

enviar_mensajes_a(mensajes, cliente){	}

recibir_confirmacion(cliente, int idMensaje){	}

}


En el broker:
Lista de todos los procesos
Adentro del mensaje:
Lista de quienes ya fue enviado | 
Lista de quienes ya recibi el ACK | 


typedef struct proceso{
	uint32_t IDProceso;
}process;

Lee la cola de subs y se lo manda a todos los que no esten en la cola de ya fue enviado.
Lee  la cola de quienes fueron enviados. 2.1) Si ya recibi ack no hago nada. 2.2) Si no lo recibi lo mando de nuevo.
